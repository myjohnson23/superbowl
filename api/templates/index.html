<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Football Players</title>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            fetchPlayers();
        });

        function fetchPlayers() {
            fetch("/players")
                .then(response => response.json())
                .then(data => {
                    let tableBody = document.getElementById("playersTable");
                    tableBody.innerHTML = "";
                    data.forEach(player => {
                        function formatValue(value) {
                            return value !== undefined ? value : "-";
                        }
                        let row = `<tr>
                            <td>${formatValue(player.Name)}</td>
                            <td>${formatValue(player.Team)}</td>
                            <td>${formatValue(player.Position)}</td>
                            <td>${formatValue(player.OPP)}</td>
                            <td>${formatValue(player.Date)}</td>
                            <td>${formatValue(player.PC)}</td>
                            <td>${formatValue(player.PAtt)}</td>
                            <td>${formatValue(player.PaY)}</td>
                            <td>${formatValue(player.PaTD)}</td>
                            <td>${formatValue(player.I)}</td>
                            <td>${formatValue(player.RA)}</td>
                            <td>${formatValue(player.RuY)}</td>
                            <td>${formatValue(player.RuTD)}</td>
                            <td>${formatValue(player.F)}</td>
                            <td>${formatValue(player.Tar)}</td>
                            <td>${formatValue(player.Re)}</td>
                            <td>${formatValue(player.ReY)}</td>
                            <td>${formatValue(player.ReTD)}</td>
                            <td>${formatValue(player.FP)}</td>
                            <td><button onclick="deletePlayer('${player._id}')">Delete</button></td>
                        </tr>`;
                        tableBody.innerHTML += row;
                    });
                });
        }

        function addPlayer() {
            let name = document.getElementById("name").value;
            let team = document.getElementById("team").value;
            let position = document.getElementById("position").value;
            let opp = document.getElementById("opp").value;
            let date = document.getElementById("date").value;
            let fp = document.getElementById("fp").value;

            let playerData = {
                "Name": name,
                "Team": team,
                "Position": position,
                "OPP": opp,
                "Date": date,
                "FP": parseFloat(fp)
            };

            fetch("/players", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(playerData)
            }).then(response => response.json())
              .then(data => {
                  alert(data.message);
                  fetchPlayers();
              });
        }

        function deletePlayer(playerId) {
            fetch(`/players/${playerId}`, {
                method: "DELETE"
            }).then(response => response.json())
              .then(data => {
                  alert(data.message);
                  fetchPlayers();
              });
        }
    </script>
</head>
<body>
    <h1>Fantasy Football Players</h1>

    <h2>Add New Player</h2>
    <input type="text" id="name" placeholder="Name">
    <input type="text" id="team" placeholder="Team">
    <input type="text" id="position" placeholder="Position">
    <input type="text" id="opp" placeholder="Opponent">
    <input type="text" id="date" placeholder="Date">
    <input type="text" id="PC" placeholder="Pass Comp">
    <input type="text" id="PAtt" placeholder="Pass Att">
    <input type="text" id="PaY" placeholder="Pass Yds">
    <input type="text" id="PaTD" placeholder="Pass TDs">
    <input type="text" id="I" placeholder="Int">
    <input type="text" id="RA" placeholder="Rush Att">    
    <input type="text" id="RuY" placeholder="Rush Yds">
    <input type="text" id="RuTD" placeholder="Rush TDs">
    <input type="text" id="F" placeholder="Fum">
    <input type="text" id="Tar" placeholder="Target">
    <input type="text" id="Re" placeholder="Rec">
    <input type="text" id="ReY" placeholder="Rec Yds">
    <input type="text" id="ReTD" placeholder="Rec TDs">
    <input type="number" id="fp" placeholder="Fantasy Points">
    <button onclick="addPlayer()">Add Player</button>

    <h2>Player List</h2>
    <table border="1">
        <thead>
            <tr>
                <th>Name</th>
                <th>Team</th>
                <th>Position</th>
                <th>Opponent</th>
                <th>Date</th>
                <th>Pass Comp</th>
                <th>Pass Att</th>
                <th>Pass Yds</th>
                <th>Pass TDs</th>
                <th>Int</th>
                <th>Rush Att</th>
                <th>Rush Yds</th>
                <th>Rush TDs</th>
                <th>Fum</th>
                <th>Target</th>
                <th>Rec</th>
                <th>Rec Yds</th>
                <th>Rec TDs</th>
                <th>Fantasy Points</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="playersTable"></tbody>
    </table>
</body>
</html>
