<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Football Players</title>
   
</head>
<body>
    <h1>Fantasy Football Players</h1>

    <h2>Add New Player</h2>
    <input type="text" id="name" placeholder="Name">
    <input type="text" id="team" placeholder="Team">
    <input type="text" id="position" placeholder="Position">
    <input type="text" id="opp" placeholder="Opponent">
    <input type="text" id="date" placeholder="Date">
    <input type="text" id="PC" placeholder="Pass Comp">
    <input type="text" id="PAtt" placeholder="Pass Att">
    <input type="text" id="PaY" placeholder="Pass Yds">
    <input type="text" id="PaTD" placeholder="Pass TDs">
    <input type="text" id="I" placeholder="Int">
    <input type="text" id="RA" placeholder="Rush Att">    
    <input type="text" id="RuY" placeholder="Rush Yds">
    <input type="text" id="RuTD" placeholder="Rush TDs">
    <input type="text" id="F" placeholder="Fum">
    <input type="text" id="Tar" placeholder="Target">
    <input type="text" id="Re" placeholder="Rec">
    <input type="text" id="ReY" placeholder="Rec Yds">
    <input type="text" id="ReTD" placeholder="Rec TDs">
    <input type="number" id="fp" placeholder="Fantasy Points">
    <button onclick="addPlayer()">Add Player</button>

       <h1>Fantasy Football Player Summary</h1>

    <table border="1">
        <thead>
            <tr>
                <th>Name</th>
                <th>Team</th>
                <th>Position</th>
                <th>Games Played</th>
                <th>Pass Att</th>
                <th>Pass Comp</th>
                <th>Pass Yds</th>
                <th>Pass TDs</th>
                <th>INT</th>
                <th>Rush Att</th>
                <th>Rush Yds</th>
                <th>Rush TDs</th>
                <th>Fumbles</th>
                <th>Targets</th>
                <th>Receptions</th>
                <th>Rec Yds</th>
                <th>Rec TDs</th>
                <th>Fantasy Points</th>
            </tr>
        </thead>
        <tbody id="summaryTableBody">
            <!-- Player data will be dynamically inserted here -->
        </tbody>
    </table>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            console.log("DOM fully loaded");
    
            let tableBody = document.getElementById("summaryTableBody");
            
            // Check if the element exists
            if (!tableBody) {
                console.error("ERROR: Element with id 'summaryTableBody' not found!");
                return;
            } else {
                console.log("Table body found: Ready to insert data.");
            }
    
            fetchPlayerSummary();
        });
    
        function fetchPlayerSummary() {
            fetch("/players/summary")
                .then(response => response.json())
                .then(data => {
                    console.log("Fetched data:", data);  // Debugging output
                    
                    let tableBody = document.getElementById("summaryTableBody");
                    
                    if (!tableBody) {
                        console.error("ERROR: 'summaryTableBody' not found in fetchPlayerSummary!");
                        return;
                    }
    
                    tableBody.innerHTML = ""; // Clear table before updating
                    
                    if (!data.length) {
                        tableBody.innerHTML = "<tr><td colspan='18'>No player data found.</td></tr>";
                        return;
                    }
    
                    data.forEach(player => {
                        let row = `<tr>
                            <td>${player.Name || "-"}</td>
                            <td>${player.Team || "-"}</td>
                            <td>${player.Position || "-"}</td>
                            <td>${player["Games Played"] || "-"}</td>
                            <td>${player.PAtt || "-"}</td>
                            <td>${player.PC || "-"}</td>
                            <td>${player.PaY || "-"}</td>
                            <td>${player.PaTD || "-"}</td>
                            <td>${player.I || "-"}</td>
                            <td>${player.RA || "-"}</td>
                            <td>${player.RuY || "-"}</td>
                            <td>${player.RuTD || "-"}</td>
                            <td>${player.F || "-"}</td>
                            <td>${player.Tar || "-"}</td>
                            <td>${player.Re || "-"}</td>
                            <td>${player.ReY || "-"}</td>
                            <td>${player.ReTD || "-"}</td>
                            <td>${player.FP || "-"}</td>
                        </tr>`;
                        tableBody.innerHTML += row;
                    });
                })
                .catch(error => console.error("Error fetching summary data:", error));
        }
    </script>
</body>
</html>
    
